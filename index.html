<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Trifusion Technologies ‚Äî Cat√°logo</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
    margin:0;
    font-family:system-ui, Arial, sans-serif;
    background:#0b0f19;
    color:#e6ecff;
}
header{
    padding:16px;
    background:#000;
}
.catalogo{
    max-width:1100px;
    margin:30px auto;
    padding:0 16px;
}
.categoria{
    margin:30px 0 14px;
    padding:12px 16px;
    background:rgba(0,194,255,.15);
    border-left:6px solid #00c2ff;
    font-weight:800;
    letter-spacing:.15em;
    text-transform:uppercase;
}
.producto{
    background:#101624;
    border:1px solid #1f2940;
    border-radius:12px;
    padding:14px;
    margin-bottom:10px;
    display:flex;
    justify-content:space-between;
}
.descripcion{
    color:#00c2ff;
    font-weight:600;
}
.precio{
    color:#ff4b6a;
    font-weight:700;
}
</style>
</head>

<body>

<header>
    <h1>Trifusion Technologies</h1>
</header>

<div id="catalogo" class="catalogo"></div>

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script>
const SHEET_ID = "1EtOwxNRGq0WFgGaRXtJgibUqzxIgcAUeRkJlr1wPsLc";
const CSV_URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:csv`;
const catalogo = document.getElementById("catalogo");

function esCategoria(texto){
    if(!texto) return false;

    // una sola palabra
    if(texto.includes(" ")) return false;

    // sin n√∫meros
    if(/\d/.test(texto)) return false;

    // corta (marcas / tipos)
    if(texto.length > 12) return false;

    // no s√≠mbolos t√≠picos de modelos
    if(/[\/\-"]/g.test(texto)) return false;

    return true;
}

function precioFormateado(n){
    return "$" + Number(n).toLocaleString("es-DO");
}

function procesar(data){
    catalogo.innerHTML = "";

    data.forEach(fila=>{
        const descripcion = (fila[2] || "").trim();
        const precioRaw   = (fila[3] || "").trim();

        if(!descripcion) return;

        // üî∑ CATEGOR√çA / IDENTIFICADOR
        if(esCategoria(descripcion)){
            const cat = document.createElement("div");
            cat.className = "categoria";
            cat.textContent = descripcion;
            catalogo.appendChild(cat);
            return;
        }

        // üö´ TRANSITO NO SE MUESTRA
        if(precioRaw.toUpperCase().includes("TRANSITO")) return;

        // üü¢ PRODUCTO (solo si hay n√∫mero de precio)
        const num = precioRaw.replace(/[^0-9]/g,"");
        if(!num) return;

        const prod = document.createElement("div");
        prod.className = "producto";
        prod.innerHTML = `
            <div class="descripcion">${descripcion}</div>
            <div class="precio">${precioFormateado(num)}</div>
        `;
        catalogo.appendChild(prod);
    });
}

fetch(CSV_URL)
.then(r=>r.text())
.then(t=>Papa.parse(t,{
    skipEmptyLines:true,
    complete:r=>procesar(r.data)
}));
</script>

</body>
</html>
