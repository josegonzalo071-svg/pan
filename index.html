<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Trifusion Technologies ‚Äî Cat√°logo</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
    margin:0;
    font-family:system-ui, Arial, sans-serif;
    background:#0b0f19;
    color:#e6ecff;
}
header{
    padding:18px;
    background:#000;
}
.catalogo{
    max-width:1100px;
    margin:30px auto;
    padding:0 16px;
}
.categoria{
    margin:28px 0 14px;
    padding:14px 18px;
    background:rgba(0,194,255,.18);
    border-left:6px solid #00c2ff;
    font-weight:800;
    letter-spacing:.18em;
    text-transform:uppercase;
}
.producto{
    background:#101624;
    border:1px solid #1f2940;
    border-radius:12px;
    padding:14px;
    margin-bottom:10px;
    display:flex;
    justify-content:space-between;
}
.descripcion{
    color:#00c2ff;
    font-weight:600;
}
.precio{
    color:#ff4b6a;
    font-weight:700;
}
</style>
</head>

<body>

<header>
    <h1>Trifusion Technologies</h1>
</header>

<div id="catalogo" class="catalogo"></div>

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script>
const SHEET_ID = "1EtOwxNRGq0WFgGaRXtJgibUqzxIgcAUeRkJlr1wPsLc";
const CSV_URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:csv`;
const cont = document.getElementById("catalogo");

function esCategoria(row){
    const a = (row[0]||"").trim();
    const b = (row[1]||"").trim();
    const c = (row[2]||"").trim();
    const d = (row[3]||"").trim();

    return a && a === b && b === c && c === d;
}

function formatearPrecio(n){
    return "$" + Number(n).toLocaleString("es-DO");
}

fetch(CSV_URL)
.then(r=>r.text())
.then(t=>{
    Papa.parse(t,{
        skipEmptyLines:true,
        complete:(res)=>{
            cont.innerHTML = "";

            res.data.forEach(row=>{
                const desc = (row[2]||"").trim();
                const precioRaw = (row[3]||"").trim();

                if(!desc) return;

                // üîµ CATEGOR√çA
                if(esCategoria(row)){
                    const cat = document.createElement("div");
                    cat.className = "categoria";
                    cat.textContent = desc;
                    cont.appendChild(cat);
                    return;
                }

                // üö´ TRANSITO
                if(precioRaw.toUpperCase().includes("TRANSITO")) return;

                // üü¢ PRODUCTO
                const num = precioRaw.replace(/[^0-9]/g,"");
                if(!num) return;

                const prod = document.createElement("div");
                prod.className = "producto";
                prod.innerHTML = `
                    <div class="descripcion">${desc}</div>
                    <div class="precio">${formatearPrecio(num)}</div>
                `;
                cont.appendChild(prod);
            });
        }
    });
});
</script>

</body>
</html>
