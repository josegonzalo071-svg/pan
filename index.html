<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trifusion Technologies - Catálogo Profesional</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0b0f19;
            --bg-secondary: #101624;
            --card-bg: #151b2d;
            --card-border: #1f2940;
            --accent-primary: #00c2ff;
            --accent-secondary: #00a8e8;
            --accent-soft: rgba(0, 194, 255, 0.18);
            --text-primary: #e6ecff;
            --text-secondary: #9aa4c6;
            --text-tertiary: #6b759c;
            --danger: #ff4b6a;
            --success: #4ade80;
            --warning: #facc15;
            --border-radius: 16px;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Roboto', sans-serif;
            background: radial-gradient(circle at top, #172239 0, #050712 55%, #02030a 100%);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Header Styles */
        header {
            padding: 18px 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-inner {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo-title h1 {
            margin: 0;
            font-size: 24px;
            letter-spacing: 0.03em;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-title h1 svg {
            width: 32px;
            height: 32px;
            fill: var(--accent-primary);
        }

        .header-contact {
            font-size: 14px;
            color: var(--text-secondary);
            text-align: right;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .header-contact span {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .header-contact span svg {
            width: 16px;
            height: 16px;
            fill: var(--accent-primary);
        }

        /* Toolbar Styles */
        .toolbar {
            max-width: 1200px;
            margin: 18px auto 0;
            padding: 0 16px 4px;
            display: grid;
            grid-template-columns: minmax(0, 2fr) minmax(0, 1fr);
            gap: 12px;
        }

        @media (max-width: 800px) {
            .toolbar {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            background: rgba(8, 12, 26, 0.9);
            border-radius: var(--border-radius);
            padding: 16px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .panel-title {
            font-size: 14px;
            margin-bottom: 10px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .panel-title svg {
            width: 18px;
            height: 18px;
            fill: var(--accent-primary);
        }

        input[type="text"], input[type="number"], input[type="file"] {
            width: 100%;
            background: #050815;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            padding: 12px 16px;
            color: var(--text-primary);
            font-size: 16px;
            outline: none;
            transition: var(--transition);
        }

        input[type="text"]:focus, input[type="number"]:focus {
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(0, 194, 255, 0.2);
        }

        input[type="file"] {
            padding: 10px;
        }

        button {
            border: none;
            border-radius: 10px;
            padding: 12px 20px;
            font-size: 16px;
            font-weight: 600;
            letter-spacing: 0.03em;
            cursor: pointer;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            color: #02030a;
            box-shadow: 0 6px 18px rgba(0, 194, 255, 0.35);
            white-space: nowrap;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 22px rgba(0, 194, 255, 0.45);
        }

        button:active {
            transform: translateY(0);
        }

        button.secondary {
            background: rgba(255, 255, 255, 0.08);
            color: var(--text-primary);
            box-shadow: none;
        }

        button.secondary:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        button.danger {
            background: linear-gradient(135deg, #ff4b6a, #e53e3e);
            color: #02030a;
            box-shadow: 0 6px 18px rgba(255, 75, 106, 0.35);
        }

        /* Auth Panel */
        .auth-panel {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            padding: 30px;
            max-width: 500px;
            margin: 40px auto;
            text-align: center;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .auth-panel h2 {
            font-size: 28px;
            margin-bottom: 20px;
            color: var(--accent-primary);
        }

        .auth-panel p {
            color: var(--text-secondary);
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .auth-form input {
            padding: 14px;
            font-size: 16px;
        }

        .auth-form button {
            width: 100%;
            padding: 14px;
            font-size: 18px;
        }

        /* Catalog Section */
        .catalogo-wrapper {
            max-width: 1200px;
            margin: 20px auto 40px;
            padding: 0 16px;
        }

        .section-title {
            font-size: 24px;
            font-weight: 600;
            margin: 30px 0 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--text-primary);
        }

        .section-title svg {
            width: 28px;
            height: 28px;
            fill: var(--accent-primary);
        }

        .section-subtitle {
            color: var(--text-secondary);
            font-size: 16px;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-filters {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .category-filter {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 14px;
            white-space: nowrap;
        }

        .category-filter.active {
            background: var(--accent-primary);
            color: #02030a;
            border-color: var(--accent-primary);
        }

        .catalogo {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .category-section {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow);
        }

        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
        }

        .category-title {
            font-size: 22px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .category-title.tcl {
            color: #00c2ff;
            border-left: 4px solid #00c2ff;
        }

        .category-title.zte {
            color: #4ade80;
            border-left: 4px solid #4ade80;
        }

        .category-title.cubot {
            color: #facc15;
            border-left: 4px solid #facc15;
        }

        .category-title span {
            background: rgba(0, 194, 255, 0.1);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 14px;
        }

        .productos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .producto {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 20px;
            border: 1px solid var(--card-border);
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .producto:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
            border-color: rgba(0, 194, 255, 0.3);
        }

        .producto-image {
            width: 100%;
            height: 200px;
            border-radius: 12px;
            background: linear-gradient(45deg, #1f2940, #0f1524);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        .producto-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 12px;
        }

        .producto-image::after {
            content: "Imagen del producto";
            color: var(--text-tertiary);
            font-size: 16px;
            position: absolute;
        }

        .producto-details {
            flex: 1;
        }

        .descripcion {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text-primary);
            line-height: 1.4;
        }

        .producto-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        .precio {
            font-size: 22px;
            font-weight: 700;
            white-space: nowrap;
            color: var(--danger);
        }

        .precio.transito {
            color: var(--warning);
            text-shadow: 0 0 6px rgba(255, 193, 75, 0.45);
        }

        .producto-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .btn-edit {
            flex: 1;
            padding: 10px;
            font-size: 14px;
            background: rgba(0, 194, 255, 0.1);
            color: var(--accent-primary);
            border: 1px solid var(--accent-primary);
        }

        .btn-edit:hover {
            background: rgba(0, 194, 255, 0.2);
        }

        .btn-image {
            flex: 1;
            padding: 10px;
            font-size: 14px;
            background: rgba(74, 222, 128, 0.1);
            color: #4ade80;
            border: 1px solid #4ade80;
        }

        .btn-image:hover {
            background: rgba(74, 222, 128, 0.2);
        }

        .editor-precio {
            display: flex;
            gap: 12px;
            align-items: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        .editor-precio label {
            display: none;
        }

        .input-precio {
            width: 100%;
            background: #050815;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            padding: 10px 15px;
            color: var(--text-primary);
            font-size: 16px;
            outline: none;
        }

        #mensajeVacio {
            text-align: center;
            margin-top: 40px;
            color: var(--text-secondary);
            padding: 30px;
            font-size: 18px;
        }

        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 20px;
            padding: 40px;
            text-align: center;
        }

        .empty-state svg {
            width: 100px;
            height: 100px;
            fill: var(--text-tertiary);
            opacity: 0.3;
        }

        .empty-state h3 {
            font-size: 24px;
            color: var(--text-secondary);
        }

        .empty-state p {
            color: var(--text-tertiary);
            max-width: 500px;
            line-height: 1.6;
        }

        /* Admin Controls */
        .admin-controls {
            display: flex;
            gap: 12px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .admin-controls button {
            flex: 1;
            min-width: 150px;
        }

        /* Loading */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 40px;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top-color: var(--accent-primary);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .productos-grid {
                grid-template-columns: 1fr;
            }
            
            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .category-title {
                font-size: 20px;
            }
        }

        /* Admin Only Styles */
        .admin-only {
            display: none;
        }

        .admin-mode .admin-only {
            display: block;
        }

        .admin-mode .auth-panel {
            display: none;
        }

        .admin-mode .catalogo-wrapper {
            margin-top: 0;
        }

        /* Status Indicators */
        .status-badge {
            display: inline-block;
            padding: 5px 2px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }

        .status-transito {
            background: rgba(255, 193, 75, 0.15);
            color: var(--warning);
        }

        .status-disponible {
            background: rgba(74, 222, 128, 0.15);
            color: #4ade80;
        }

        /* Footer */
        footer {
            padding: 30px 16px;
            text-align: center;
            color: var(--text-tertiary);
            font-size: 14px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            margin-top: 40px;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .footer-contact {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
        }

        .footer-contact span {
            display: flex;
            align-items: center;
            gap: 6px;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-inner">
            <div class="logo-title">
                <h1>
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
                        <path d="M12 6v6l4 2v-6l-4-2z"/>
                    </svg>
                    Trifusion Technologies
                </h1>
            </div>
            <div class="header-contact">
                <span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/><path d="M12 6v6l4 2v-6l-4-2z"/></svg> Santo Domingo</span>
                <span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5v10H4V8l8 5 8-5v10h4V8z"/></svg> WhatsApp: +1 (829) 872-5163</span>
            </div>
        </div>
    </header>

    <!-- Toolbar -->
    <div class="toolbar">
        <div class="panel">
            <div class="panel-title">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.31 16 9.9 16 7.14 13.86 5 11 5S6 7.14 6 9.9s2.14 4.9 4.9 4.9c1.41 0 2.69-.59 3.57-1.57L14.2 14h1.3c.55 0 1-.45 1-1v-1.5c0-.55-.45-1-1-1zM9 9.9c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z"/>
                </svg>
                Buscar artículos
            </div>
            <input id="buscadorProductos" type="text" placeholder="Escribe el modelo o parte del nombre...">
        </div>
        
        <div class="panel">
            <div class="panel-title">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                </svg>
                Acceso administrador
            </div>
            <div id="authControls">
                <button id="btnLogin">Entrar</button>
                <button id="btnLogout" style="display:none;">Salir</button>
            </div>
        </div>
    </div>

    <!-- Auth Panel (Visible when not logged in) -->
    <div class="auth-panel" id="authPanel">
        <h2>Acceso Administrador</h2>
        <p>Solo los administradores pueden acceder a esta sección. Por favor, inicie sesión para gestionar el catálogo de productos.</p>
        <div class="auth-form">
            <input type="text" id="adminUser" placeholder="Usuario (Teléfono)" autofocus>
            <input type="password" id="adminPass" placeholder="Contraseña">
            <button id="loginBtn">Iniciar Sesión</button>
        </div>
    </div>

    <!-- Catalog Section -->
    <div class="catalogo-wrapper">
        <div class="section-title">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
                <path d="M12 6v6l4 2v-6l-4-2z"/>
            </svg>
            Catálogo de Productos
        </div>
        <p class="section-subtitle">Nuestro catálogo profesional de teléfonos organizado por marcas y categorías. Solo los administradores pueden editar los productos.</p>
        
        <div class="section-header">
            <div class="section-filters">
                <button class="category-filter active" data-category="all">Todas las categorías</button>
                <button class="category-filter" data-category="tcl">TCL</button>
                <button class="category-filter" data-category="zte">ZTE</button>
                <button class="category-filter" data-category="cubot">CUBOT</button>
            </div>
            <div class="admin-controls admin-only">
                <button id="btnAddProduct">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="18" height="18">
                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                    </svg>
                    Agregar producto
                </button>
                <button id="btnImportExcel">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="18" height="18">
                        <path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 15H7v-4h7v4zm0-6H7V7h7v5z"/>
                    </svg>
                    Importar desde Excel
                </button>
            </div>
        </div>

        <!-- TCL Section -->
        <div class="category-section" id="tclSection">
            <div class="category-header">
                <h2 class="category-title tcl">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="28" height="28">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
                        <path d="M12 6v6l4 2v-6l-4-2z"/>
                    </svg>
                    TCL
                    <span>14 productos</span>
                </h2>
                <span class="status-badge status-disponible">Disponible</span>
            </div>
            <div class="productos-grid" id="tclProducts">
                <!-- Products will be inserted here -->
            </div>
        </div>

        <!-- ZTE Section -->
        <div class="category-section" id="zteSection">
            <div class="category-header">
                <h2 class="category-title zte">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="28" height="28">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 "/>
                        <path d="M12 6v6l4 2v-6l-4-2z"/>
                    </svg>
                    ZTE
                    <span>8 productos</span>
                </h2>
                <span class="status-badge status-disponible">Disponible</span>
            </div>
            <div class="productos-grid" id="zteProducts">
                <!-- Products will be inserted here -->
            </div>
        </div>

        <!-- CUBOT Section -->
        <div class="category-section" id="cubotSection">
            <div class="category-header">
                <h2 class="category-title cubot">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="28" height="28">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S1 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
                        <path d="M12 6v6l4 2v-6l-4-2z"/>
                    </svg>
                    CUBOT
                    <span>5 productos</span>
                </h2>
                <span class="status-badge status-transito">En tránsito</span>
            </div>
            <div class="productos-grid" id="cubotProducts">
                <!-- Products will be inserted here -->
            </div>
        </div>

        <div id="mensajeVacio" style="display:none;">
            No se encontraron productos que coincidan con tu búsqueda.
        </div>
    </div>

    <!-- Product Modal -->
    <div class="modal" id="productModal" style="display:none;">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Agregar/Editar Producto</h2>
            <form id="productForm">
                <div class="form-group">
                    <label for="productName">Nombre del producto</label>
                    <input type="text" id="productName" placeholder="Ej: TCL 302 (32GB, 6.52", 128GB RAM 2+4)" required>
                </div>
                <div class="form-group">
                    <label for="productCategory">Categoría</label>
                    <select id="productCategory" required>
                        <option value="tcl">TCL</option>
                        <option value="zte">ZTE</option>
                        <option value="cubot">CUBOT</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="productPrice">Precio (RD$)</label>
                    <input type="number" id="productPrice" placeholder="12000" min="0" required>
                </div>
                <div class="form-group">
                    <label for="productStatus">Estado del producto</label>
                    <select id="productStatus">
                        <option value="disponible">Disponible</option>
                        <option value="transito">En tránsito</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="productImage">Imagen del producto</label>
                    <input type="file" id="productImage" accept="image/*">
                    <div class="image-preview" id="imagePreview" style="margin-top: 10px; height: 150px; background: #1f2940; border-radius: 10px; display: flex; align-items: justify-content: center; color: #9aa4c6;">
                        <span>Selecciona una imagen</span>
                    </div>
                </div>
                <button type="submit" class="btn-primary">Guardar producto</button>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <p>© 2026 Trifusion Technologies - Catálogo Profesional de Teléfonos</p>
            <div class="footer-contact">
                <span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/><path d="M12 6v6l4 2v-6l-4-2z"/></svg> Santo Domingo</span>
                <span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5v10H4V8l8 5 8-5v10h4V8z"/></svg> WhatsApp: +1 (829) 872-5163</span>
            </div>
        </div>
    </footer>

    <script>
        // Firebase configuration - from firebase-config.js
        const firebaseConfig = {
            apiKey: "AIzaSyDlOJqBgd-8KqUT-Y94lsma5W8T79PsPjM",
            authDomain: "trifusion-cotizador.firebaseapp.com",
            projectId: "trifusion-cotizador",
            storageBucket: "trifusion-cotizador.firebasestorage.app",
            messagingSenderId: "407374211882",
            appId: "1:407374211882:web:b692792ccc39c8d48f4c53"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();
        const storage = firebase.storage();

        // Global variables
        let esAdmin = false;
        let productos = [];
        let currentProduct = null;

        // DOM elements
        const authPanel = document.getElementById('authPanel');
        const authControls = document.getElementById('authControls');
        const btnLogin = document.getElementById('btnLogin');
        const btnLogout = document.getElementById('btnLogout');
        const btnAddProduct = document.getElementById('btnAddProduct');
        const btnImportExcel = document.getElementById('btnImportExcel');
        const productModal = document.getElementById('productModal');
        const productForm = document.getElementById('productForm');
        const imagePreview = document.getElementById('imagePreview');
        const productImageInput = document.getElementById('productImage');
        const buscadorProductos = document.getElementById('buscadorProductos');

        // Initialize the app
        function initApp() {
            // Check if user is already logged in
            auth.onAuthStateChanged(user => {
                if (user) {
                    esAdmin = true;
                    document.body.classList.add('admin-mode');
                    authPanel.style.display = 'none';
                    authControls.style.display = 'flex';
                    btnLogin.style.display = 'none';
                    btnLogout.style.display = 'inline-block';
                    
                    // Load products
                    loadProducts();
                } else {
                    esAdmin = false;
                    document.body.classList.remove('admin-mode');
                    authPanel.style.display = 'block';
                    authControls.style.display = 'flex';
                    btnLogin.style.display = 'inline-block';
                    btnLogout.style.display = 'none';
                }
            });

            // Event listeners
            btnLogin.addEventListener('click', () => {
                authPanel.style.display = 'block';
                document.getElementById('adminUser').focus();
            });

            btnLogout.addEventListener('click', () => {
                auth.signOut().catch(error => {
                    console.error("Error signing out:", error);
                });
            });

            document.getElementById('loginBtn').addEventListener('click', handleLogin);
            productImageInput.addEventListener('change', handleImagePreview);
            productForm.addEventListener('submit', handleProductSubmit);
            buscadorProductos.addEventListener('input', filterProducts);
            
            // Category filters
            document.querySelectorAll('.category-filter').forEach(button => {
                button.addEventListener('click', () => {
                    document.querySelectorAll('.category-filter').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    button.classList.add('active');
                    filterProducts();
                });
            });
            
            // Add product button
            if (btnAddProduct) {
                btnAddProduct.addEventListener('click', () => {
                    currentProduct = null;
                    document.getElementById('productName').value = '';
                    document.getElementById('productCategory').value = 'tcl';
                    document.getElementById('productPrice').value = '';
                    document.getElementById('productStatus').value = 'disponible';
                    imagePreview.innerHTML = '<span>Selecciona una imagen</span>';
                    productModal.style.display = 'block';
                    document.getElementById('productName').focus();
                });
            }
            
            // Close modal when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === productModal) {
                    productModal.style.display = 'none';
                }
            });
        }

        // Handle user login
        function handleLogin() {
            const user = document.getElementById('adminUser').value.trim();
            const pass = document.getElementById('adminPass').value.trim();
            
            if (user === 'TELEFONO' && pass === '1234') {
                // Simulate Firebase login (in a real app, use Firebase auth)
                esAdmin = true;
                document.body.classList.add('admin-mode');
                authPanel.style.display = 'none';
                authControls.style.display = 'flex';
                btnLogin.style.display = 'none';
                btnLogout.style.display = 'inline-block';
                
                // Clear form
                document.getElementById('adminUser').value = '';
                document.getElementById('adminPass').value = '';
                
                // Load products
                loadProducts();
                
                // Show success message
                alert('¡Acceso administrativo activado! Ahora puede gestionar el catálogo de productos.');
            } else {
                alert('Usuario o contraseña incorrectos. Por favor, intente nuevamente.');
            }
        }

        // Load products from Firebase (in a real app)
        function loadProducts() {
            // In a real implementation, this would fetch from Firestore
            // For demo purposes, we'll use the data from the TEL.txt file
            const mockProducts = [
                // TCL products
                {
                    id: 'tcl1',
                    name: 'TCL 302 (32GB, 6.52", 128GB RAM 2+4)',
                    price: 12999,
                    category: 'tcl',
                    status: 'disponible',
                    image: 'https://via.placeholder.com/300x200/1f2940/ffffff?text=TCL+302'
                },
                {
                    id: 'tcl2',
                    name: 'TCL 3206 (64GB, 6.52", 128GB RAM 3+6)',
                    price: 16999,
                    category: 'tcl',
                    status: 'disponible',
                    image: 'https://via.placeholder.com/300x200/1f2940/ffffff?text=TCL+3206'
                },
                {
                    id: 'tcl3',
                    name: 'TCL A31 PRIME (128GB, 6.52", 128GB RAM 4+8)',
                    price: 18999,
                    category: 'tcl',
                    status: 'disponible',
                    image: 'https://via.placeholder.com/300x200/1f2940/ffffff?text=TCL+A31+PRIME'
                },
                {
                    id: 'tcl4',
                    name: 'TCL 503 (128GB, 6.67", 9GB RAM 3+6)',
                    price: 21999,
                    category: 'tcl',
                    status: 'transito',
                    image: 'https://via.placeholder.com/300x200/1f2940/ffffff?text=TCL+503'
                },
                
                // ZTE products
                {
                    id: 'zte1',
                    name: 'BLADE A55 (128GB, 6.75", 128GB RAM 4+4)',
                    price: 15999,
                    category: 'zte',
                    status: 'disponible',
                    image: 'https://via.placeholder.com/300x200/1f2940/ffffff?text=ZTE+BLADE+A55'
                },
                {
                    id: 'zte2',
                    name: 'BLADE A56 (128GB, 6.75" HD+, 128GB RAM 4+8)',
                    price: 17999,
                    category: 'zte',
                    status: 'disponible',
                    image: 'https://via.placeholder.com/300x200/1f2940/ffffff?text=ZTE+BLADE+A56'
                },
                {
                    id: 'zte3',
                    name: 'BLADE A56 PRO (128GB, 6.75" HD+, 128GB RAM 4+8, 50MP)',
                    price: 22999,
                    category: 'zte',
                    status: 'disponible',
                    image: 'https://via.placeholder.com/300x200/1f2940/ffffff?text=ZTE+BLADE+A56+PRO'
                },
                {
                    id: 'zte4',
                    name: 'BLADE V70 MAX (256GB, 6.67" 120HZ, 14GB RAM 4+10, 5200 MAH)',
                    price: 26999,
                    category: 'zte',
                    status: 'disponible',
                    image: 'https://via.placeholder.com/300x200/1f2940/ffffff?text=ZTE+BLADE+V70+MAX'
                },
                
                // CUBOT products
                {
                    id: 'cubot1',
                    name: 'BLADE V15 DESIGN (256GB, 6.7" 120HZ, 20GB RAM 8+12)',
                    price: 29999,
                    category: 'cubot',
                    status: 'transito',
                    image: 'https://via.placeholder.com/300x200/1f2940/ffffff?text=CUBOT+BLADE+V15'
                }
            ];
            
            productos = mockProducts;
            renderProducts();
        }

        // Render products based on filters
        function renderProducts(filter = '') {
            const activeCategory = document.querySelector('.category-filter.active').dataset.category;
            
            // Filter products
            const filteredProducts = productos.filter(product => {
                const matchesSearch = !filter || 
                    product.name.toLowerCase().includes(filter.toLowerCase());
                
                const matchesCategory = activeCategory === 'all' || 
                    product.category === activeCategory;
                
                return matchesSearch && matchesCategory;
            });
            
            // Render products in each category section
            renderCategoryProducts('tcl', filteredProducts);
            renderCategoryProducts('zte', filteredProducts);
            renderCategoryProducts('cubot', filteredProducts);
            
            // Update empty state
            const message = document.getElementById('mensajeVacio');
            message.style.display = filteredProducts.length === 0 ? 'block' : 'none';
        }

        // Render products for a specific category
        function renderCategoryProducts(category, products) {
            const container = document.getElementById(`${category}Products`);
            container.innerHTML = '';
            
            const categoryProducts = products.filter(p => p.category === category);
            
            if (categoryProducts.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
                            <path d="M12 6v6l4 2v-6l-4-2z"/>
                        </svg>
                        <h3>No hay productos en esta categoría</h3>
                        <p>Parece que no hay productos disponibles en la categoría ${category.toUpperCase()}. Puedes agregar nuevos productos desde el panel de administración.</p>
                    </div>
                `;
                return;
            }
            
            categoryProducts.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'producto';
                productCard.innerHTML = `
                    <div class="producto-image">
                        <img src="${product.image}" alt="${product.name}">
                    </div>
                    <div class="producto-details">
                        <h3 class="descripcion">${product.name}</h3>
                        <div class="producto-info">
                            <div class="precio ${product.status === 'transito' ? 'transito' : ''}">
                                ${product.status === 'transito' ? 'TRÁNSITO' : '$' + formatPrice(product.price)}
                            </div>
                            <span class="status-badge ${product.status === 'transito' ? 'status-transito' : 'status-disponible'}">
                                ${product.status === 'transito' ? 'En tránsito' : 'Disponible'}
                            </span>
                        </div>
                        <div class="producto-actions admin-only">
                            <button class="btn-edit" data-id="${product.id}">Editar</button>
                            <button class="btn-image" data-id="${product.id}">Imagen</button>
                        </div>
                        <div class="editor-precio admin-only">
                            <input type="number" class="input-precio" value="${product.price}" min="0" data-id="${product.id}">
                            <button class="btn-aplicar" data-id="${product.id}">Actualizar</button>
                        </div>
                    </div>
                `;
                container.appendChild(productCard);
            });
            
            // Add event listeners to edit buttons
            container.querySelectorAll('.btn-edit').forEach(button => {
                button.addEventListener('click', () => {
                    const productId = button.dataset.id;
                    const product = productos.find(p => p.id === productId);
                    
                    if (product) {
                        currentProduct = product;
                        document.getElementById('productName').value = product.name;
                        document.getElementById('productCategory').value = product.category;
                        document.getElementById('productPrice').value = product.price;
                        document.getElementById('productStatus').value = product.status;
                        
                        // Set image preview
                        imagePreview.innerHTML = `<img src="${product.image}" style="width:100%;height:100%;object-fit:cover;border-radius:10px;">`;
                        
                        productModal.style.display = 'block';
                        document.getElementById('productName').focus();
                    }
                });
            });
            
            // Add event listeners to image buttons
            container.querySelectorAll('.btn-image').forEach(button => {
                button.addEventListener('click', () => {
                    const productId = button.dataset.id;
                    const product = productos.find(p => p.id === productId);
                    
                    if (product) {
                        alert('Funcionalidad de imagen seleccionada. En una implementación real, esto abriría un selector de imágenes.');
                    }
                });
            });
            
            // Add event listeners to price update buttons
            container.querySelectorAll('.btn-aplicar').forEach(button => {
                button.addEventListener('click', () => {
                    const productId = button.dataset.id;
                    const input = button.parentElement.querySelector('.input-precio');
                    const newPrice = parseFloat(input.value);
                    
                    if (isNaN(newPrice) || newPrice <= 0) {
                        alert('Precio inválido. Por favor, ingresa un valor válido.');
                        return;
                    }
                    
                    // Update product price
                    const productIndex = productos.findIndex(p => p.id === productId);
                    if (productIndex !== -1) {
                        productos[productIndex].price = newPrice;
                        renderProducts();
                        alert('Precio actualizado correctamente.');
                    }
                });
            });
        }

        // Format price with commas
        function formatPrice(price) {
            return price.toLocaleString('es-DO');
        }

        // Filter products based on search
        function filterProducts() {
            const filter = buscadorProductos.value.trim();
            renderProducts(filter);
        }

        // Handle image preview
        function handleImagePreview(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(event) {
                imagePreview.innerHTML = `<img src="${event.target.result}" style="width:100%;height:100%;object-fit:cover;border-radius:10px;">`;
            };
            reader.readAsDataURL(file);
        }

        // Handle product form submission
        function handleProductSubmit(e) {
            e.preventDefault();
            
            const name = document.getElementById('productName').value;
            const category = document.getElementById('productCategory').value;
            const price = parseFloat(document.getElementById('productPrice').value);
            const status = document.getElementById('productStatus').value;
            const imageFile = productImageInput.files[0];
            
            if (!name || !category || isNaN(price) || price <= 0) {
                alert('Por favor, completa todos los campos requeridos.');
                return;
            }
            
            // In a real app, we would upload the image to Firebase Storage
            // For demo purposes, we'll use a placeholder
            const imageUrl = imageFile ? URL.createObjectURL(imageFile) : 'https://via.placeholder.com/300x200/1f2940/ffffff?text=Producto';
            
            if (currentProduct) {
                // Update existing product
                const index = productos.findIndex(p => p.id === currentProduct.id);
                if (index !== -1) {
                    productos[index] = {
                        ...productos[index],
                        name,
                        price,
                        status,
                        image: imageUrl
                    };
                    alert('Producto actualizado correctamente.');
                }
            } else {
                // Add new product
                const newProduct = {
                    id: `product-${Date.now()}`,
                    name,
                    price,
                    category,
                    status,
                    image: imageUrl
                };
                
                productos.push(newProduct);
                alert('Producto agregado correctamente.');
            }
            
            // Close modal
            productModal.style.display = 'none';
            
            // Refresh product list
            renderProducts();
        }

        // Initialize the app when the DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            initApp();
        });
    </script>
</body>
</html>
