<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Trifusion Technologies ‚Äî Cat√°logo</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
    margin:0;
    font-family:system-ui, Arial, sans-serif;
    background:#0b0f19;
    color:#e6ecff;
}
header{
    padding:16px;
    background:#000;
}
h1{margin:0}
.catalogo{
    max-width:1100px;
    margin:30px auto;
    padding:0 16px;
}
.categoria{
    margin:28px 0 12px;
    padding:10px 14px;
    border-left:5px solid #00c2ff;
    background:rgba(0,194,255,.15);
    font-weight:800;
    letter-spacing:.12em;
    text-transform:uppercase;
}
.producto{
    background:#101624;
    border:1px solid #1f2940;
    border-radius:12px;
    padding:14px;
    margin-bottom:10px;
    display:flex;
    justify-content:space-between;
}
.descripcion{
    color:#00c2ff;
    font-weight:600;
}
.precio{
    color:#ff4b6a;
    font-weight:700;
}
</style>
</head>

<body>

<header>
    <h1>Trifusion Technologies</h1>
</header>

<div id="catalogo" class="catalogo"></div>

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script>
const SHEET_ID = "1EtOwxNRGq0WFgGaRXtJgibUqzxIgcAUeRkJlr1wPsLc";
const CSV_URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:csv`;
const catalogo = document.getElementById("catalogo");

function precioFormateado(n){
    return "$" + Number(n).toLocaleString("es-DO");
}

function esCategoria(texto, precio){
    if(!texto) return false;
    if(texto.includes(" ")) return false;        // una sola palabra
    if(texto.length > 9) return false;           // corta
    if(/\d/.test(texto)) return false;            // sin n√∫meros
    if(/\d/.test(precio)) return false;           // sin precio
    return true;
}

function procesar(data){
    catalogo.innerHTML = "";

    data.forEach(fila=>{
        const descripcion = (fila[2] || "").trim();
        const precioRaw   = (fila[3] || "").trim();

        if(!descripcion) return;

        // üî∑ IDENTIFICADOR / CATEGOR√çA
        if(esCategoria(descripcion, precioRaw)){
            const c = document.createElement("div");
            c.className = "categoria";
            c.textContent = descripcion;
            catalogo.appendChild(c);
            return;
        }

        // üö´ TRANSITO NO SE MUESTRA
        if(precioRaw.toUpperCase().includes("TRANSITO")) return;

        // üü¢ PRODUCTO REAL (solo con n√∫mero)
        const num = precioRaw.replace(/[^0-9]/g,"");
        if(!num) return;

        const p = document.createElement("div");
        p.className = "producto";
        p.innerHTML = `
            <div class="descripcion">${descripcion}</div>
            <div class="precio">${precioFormateado(num)}</div>
        `;
        catalogo.appendChild(p);
    });
}

fetch(CSV_URL)
.then(r=>r.text())
.then(t=>Papa.parse(t,{skipEmptyLines:true,complete:r=>procesar(r.data)}));
</script>

</body>
</html>
