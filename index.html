
                        <!DOCTYPE html>
                        <html lang="en">
                        <head>
                            <meta charset="UTF-8">
                            <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <style>
                body {
                  background-color: white; /* Ensure the iframe has a white background */
                }

                
              </style>
                        </head>
                        <body>
                            <!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Trifusion Technologies ‚Äî Cat√°logo</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
    :root{
        --bg:#0b0f19;
        --card:#101624;
        --card-border:#1f2940;
        --accent:#00c2ff;
        --accent-soft:rgba(0,194,255,0.18);
        --text:#e6ecff;
        --muted:#9aa4c6;
        --danger:#ff4b6a;
        --success:#00c853;
    }

    body {
        font-family: system-ui, Arial, sans-serif;
        background: radial-gradient(circle at top, #172239 0, #050712 55%, #02030a 100%);
        margin: 0;
        color: var(--text);
        line-height: 1.5;
    }

    header {
        padding: 18px 16px;
        border-bottom: 1px solid rgba(255,255,255,0.05);
        background: rgba(0,0,0,0.6);
        backdrop-filter: blur(10px);
        position: sticky;
        top: 0;
        z-index: 50;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
    }

    .header-inner{
        max-width: 1100px;
        margin: 0 auto;
        display:flex;
        justify-content: space-between;
        align-items:center;
        flex-wrap: wrap;
        gap: 15px;
    }

    .logo-title h1{
        margin:0;
        font-size:24px;
        letter-spacing:0.03em;
        background: linear-gradient(90deg, var(--accent), #7b3fe4, #ff4b6a);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        font-weight: 800;
    }

    .header-contact{
        font-size:13px;
        color: var(--muted);
        text-align:right;
        line-height: 1.4;
    }

    /* Toolbar */
    .toolbar{
        max-width:1100px;
        margin:18px auto 0;
        padding:0 16px 4px;
        display:grid;
        grid-template-columns:minmax(0,2fr) minmax(0,1fr);
        gap:12px;
    }

    @media(max-width:800px){
        .toolbar{
            grid-template-columns:1fr;
        }
    }

    .panel{
        background:rgba(8,12,26,0.9);
        border-radius:14px;
        padding:12px;
        border:1px solid rgba(255,255,255,0.05);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.25);
    }

    .panel-title{
        font-size:13px;
        margin-bottom:8px;
        color:var(--muted);
        text-transform:uppercase;
        letter-spacing:0.1em;
        display: flex;
        align-items: center;
        gap: 6px;
    }

    .panel-title::before {
        content: "";
        display: inline-block;
        width: 4px;
        height: 14px;
        background: var(--accent);
        border-radius: 2px;
    }

    input[type="text"]{
        width:100%;
        background:#050815;
        border-radius:10px;
        border:1px solid rgba(255,255,255,0.08);
        padding:10px 12px;
        color:var(--text);
        font-size:15px;
        outline:none;
        transition: border-color 0.3s;
    }
    
    input[type="text"]:focus {
        border-color: var(--accent);
        box-shadow: 0 0 0 2px rgba(0, 194, 255, 0.2);
    }

    button{
        border:none;
        border-radius:10px;
        padding:10px 18px;
        font-size:15px;
        font-weight:600;
        letter-spacing:0.03em;
        cursor:pointer;
        background:linear-gradient(135deg,var(--accent),#62e3ff);
        color:#02030a;
        box-shadow:0 6px 18px rgba(0,194,255,0.35);
        white-space:nowrap;
        transition: all 0.2s ease;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
    }
    
    button:hover {
        transform: translateY(-1px);
        box-shadow: 0 8px 22px rgba(0,194,255,0.45);
    }
    
    button:active {
        transform: translateY(1px);
    }

    /* Cat√°logo */
    .catalogo-wrapper{
        max-width:1100px;
        margin:20px auto 40px;
        padding:0 16px;
    }

    .catalogo{
        display:flex;
        flex-direction:column;
        gap:12px;
    }

    .producto{
        background:var(--card);
        border-radius:14px;
        padding:16px;
        border:1px solid var(--card-border);
        box-shadow:0 14px 30px rgba(0,0,0,0.35);
        display:flex;
        justify-content:space-between;
        align-items:flex-start;
        gap:15px;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }
    
    .producto::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(90deg, var(--accent), #7b3fe4, #ff4b6a);
        opacity: 0.7;
    }
    
    .producto:hover {
        transform: translateY(-2px);
        box-shadow: 0 18px 35px rgba(0, 0, 0, 0.45);
        border-color: rgba(0, 194, 255, 0.3);
    }

    .descripcion{
        font-size:17px;
        color:var(--accent);
        font-weight:600;
        word-break:break-word;
        flex:1;
        line-height: 1.4;
    }

    .producto-right{
        display:flex;
        flex-direction:column;
        align-items:flex-end;
        min-width:170px;
        gap:8px;
    }

    .precio{
        font-size:24px;
        font-weight:800;
        white-space:nowrap;
        color:var(--danger);
        text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        background: linear-gradient(90deg, #ff4b6a, #ff8a00);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
    }
    
    .precio.transito{
        color:#ffc14b;
        text-shadow:0 0 6px rgba(255,193,75,0.45);
        background: none;
        color: #ffc14b;
    }

    #mensajeVacio{
        text-align:center;
        margin-top:30px;
        color:var(--muted);
        font-size: 18px;
        padding: 30px;
        background: rgba(30, 35, 55, 0.6);
        border-radius: 16px;
        border: 1px dashed rgba(255, 255, 255, 0.1);
    }
    
    .impuesto-info {
        background: rgba(30, 40, 70, 0.7);
        border-left: 4px solid var(--accent);
        padding: 10px 15px;
        border-radius: 0 8px 8px 0;
        margin-top: 8px;
        font-size: 13px;
        color: var(--muted);
    }
    
    .impuesto-info strong {
        color: var(--accent);
    }
    
    @media (max-width: 768px) {
        .producto {
            flex-direction: column;
            align-items: stretch;
        }
        
        .producto-right {
            min-width: auto;
            align-items: flex-start;
        }
        
        .precio {
            font-size: 22px;
        }
        
        .descripcion {
            font-size: 16px;
        }
    }
    
    @media (max-width: 480px) {
        .header-inner {
            flex-direction: column;
            text-align: center;
        }
        
        .header-contact {
            text-align: center;
        }
        
        .toolbar {
            padding: 0 10px;
        }
        
        .panel {
            padding: 10px;
        }
        
        button {
            width: 100%;
            padding: 12px;
            font-size: 16px;
        }
        
        .precio {
            font-size: 20px;
        }
        
        .descripcion {
            font-size: 15px;
        }
    }
</style>
</head>
<body>

<header>
    <div class="header-inner">
        <div class="logo-title">
            <h1>Trifusion Technologies</h1>
        </div>
        <div class="header-contact">
            üìç Santo Domingo<br>
            WhatsApp: +1 (829) 872-5163<br>
            <span style="color: var(--accent); font-weight: 600; display: block; margin-top: 4px">‚úÖ Todos los precios incluyen impuestos</span>
        </div>
    </div>
</header>

<!-- TOOLBAR -->
<div class="toolbar">

    <!-- Buscador -->
    <div class="panel">
        <div class="panel-title">Buscar art√≠culos</div>
        <input id="buscadorProductos" type="text" placeholder="Escribe el modelo o parte del nombre...">
        <div class="impuesto-info">
            <strong>‚ÑπÔ∏è Precios finales con 22% de impuesto incluido</strong><br>
            Los precios mostrados ya incluyen todos los impuestos
        </div>
    </div>

    <!-- Panel vac√≠o para mantener el layout -->
    <div class="panel">
        <div class="panel-title">Informaci√≥n</div>
        <div style="color: var(--muted); font-size: 14px; padding: 8px 0;">
            Cat√°logo actualizado en tiempo real<br>
            desde Google Sheets
        </div>
    </div>

</div>

<!-- CAT√ÅLOGO -->
<div class="catalogo-wrapper">
    <div id="catalogo" class="catalogo"></div>
    <div id="mensajeVacio" style="display:none;">No se encontraron productos.</div>
</div>

<!-- PapaParse - SIN ESPACIOS EN LA URL -->
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<script>
// =========================
// CONFIGURACI√ìN
// =========================
const SHEET_ID = "1EtOwxNRGq0WFgGaRXtJgibUqzxIgcAUeRkJlr1wPsLc";
const CSV_URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:csv`;
const IMPUESTO = 1.22; // 22% de impuesto
const cont = document.getElementById("catalogo");
const buscador = document.getElementById("buscadorProductos");
const mensajeVacio = document.getElementById("mensajeVacio");

// =========================
// FUNCIONES AUXILIARES
// =========================
function limpiarEmojis(txt) {
    return txt.replace(/[\u{1F300}-\u{1FAFF}]/gu, "").trim();
}

function formatearPrecio(num) {
    return "$" + num.toLocaleString("es-DO");
}

function esCategoria(row) {
    const celdasNoVacias = row.filter(c => (c || "").trim() !== "");
    if (celdasNoVacias.length !== 1) return false;
    
    const texto = celdasNoVacias[0].trim();
    if (/\d/.test(texto)) return false; // Contiene n√∫meros
    if (texto.length > 15) return false; // Demasiado largo
    if (texto.toUpperCase().includes("TRANSITO")) return false;
    
    return true;
}

// =========================
// CARGAR Y RENDERIZAR CAT√ÅLOGO
// =========================
async function cargarCatalogo() {
    try {
        cont.innerHTML = '<div style="text-align:center;padding:30px;color:var(--accent)">Cargando productos...</div>';
        
        const resp = await fetch(CSV_URL);
        if (!resp.ok) throw new Error(`Error al cargar: ${resp.status}`);
        
        const csv = await resp.text();
        Papa.parse(csv, {
            skipEmptyLines: true,
            complete: (results) => {
                renderCatalogo(results.data);
            },
            error: (err) => {
                console.error("Error parsing CSV:", err);
                cont.innerHTML = `<div class="status-error">‚ùå Error al procesar el cat√°logo</div>`;
            }
        });
    } catch (error) {
        console.error("Error fetching catalog:", error);
        cont.innerHTML = `<div class="status-error">‚ùå Error: ${error.message}</div>`;
    }
}

function renderCatalogo(rows) {
    cont.innerHTML = "";
    const filtro = buscador.value.trim().toLowerCase();
    let productosMostrados = 0;
    
    rows.forEach(row => {
        const A = (row[0] || "").trim(); // Emoji/columna A
        const C = (row[2] || "").trim(); // Nombre/modelo
        const D = (row[3] || "").trim(); // Precio
        
        // Renderizar categor√≠a
        if (esCategoria(row)) {
            const textoCategoria = limpiarEmojis(row.find(c => (c || "").trim()) || "");
            const catEl = document.createElement("div");
            catEl.className = "categoria";
            catEl.innerHTML = `<div style="padding:14px 18px;background:rgba(0,194,255,0.25);border-left:6px solid #00c2ff;font-weight:800;letter-spacing:.18em;text-transform:uppercase">${textoCategoria}</div>`;
            cont.appendChild(catEl);
            return;
        }
        
        // Saltar productos en TR√ÅNSITO o inv√°lidos
        if (D.toUpperCase().includes("TRANSITO") || !C || !D) return;
        
        // Aplicar filtro de b√∫squeda
        if (filtro && !C.toLowerCase().includes(filtro)) return;
        
        // Calcular precio con impuesto (22%)
        const precioBase = D.replace(/[^0-9]/g, "");
        if (!precioBase) return;
        
        // ‚úÖ APLICAR 22% DE IMPUESTO Y REDONDEAR
        const precioConImpuesto = Math.round(parseFloat(precioBase) * IMPUESTO);
        
        // Crear elemento de producto
        const prodEl = document.createElement("div");
        prodEl.className = "producto";
        prodEl.innerHTML = `
            <div class="descripcion">${limpiarEmojis(A ? A + " " : "") + C}</div>
            <div class="producto-right">
                <div class="precio">${formatearPrecio(precioConImpuesto)}</div>
            </div>
        `;
        
        cont.appendChild(prodEl);
        productosMostrados++;
    });
    
    // Mostrar mensaje si no hay productos
    mensajeVacio.style.display = productosMostrados === 0 ? "block" : "none";
}

// =========================
// EVENTOS
// =========================
buscador.addEventListener("input", () => {
    renderCatalogo(Papa.parse(cont.innerHTML, {skipEmptyLines: true}).data);
});

// Cargar cat√°logo al iniciar
window.addEventListener("DOMContentLoaded", cargarCatalogo);
</script>

</body>
</html>



              <script>
                                 const IMPUESTO = 1.22; // 22% de impuesto
   const precioConImpuesto = Math.round(parseFloat(precioBase) * IMPUESTO);
   

              </script>
                        </body>
                        </html>
                    
